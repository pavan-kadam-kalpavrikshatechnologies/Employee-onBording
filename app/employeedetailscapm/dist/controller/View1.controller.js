sap.ui.define(["sap/ui/core/mvc/Controller"],function(e){"use strict";return e.extend("sap.kt.demo.employeedetailscapm.controller.View1",{onInit:function(){var e=this.getOwnerComponent().getModel();e.callFunction("/usercount",{method:"GET",success:function(e){console.log(e);var t=new sap.ui.model.json.JSONModel(e.results);this.getView().setModel(t,"jsondata")}.bind(this),error:function(e){console.log(e)}})},onLoginPress:function(){var e=this.byId("usernameInput").getValue();var t=this.byId("passwordInput").getValue();if(e!==""&&t!==""){var r=this.getOwnerComponent().getModel();r.read("/Login",{filters:[new sap.ui.model.Filter("userName",sap.ui.model.FilterOperator.EQ,e),new sap.ui.model.Filter("password",sap.ui.model.FilterOperator.EQ,t)],success:function(e){if(e.results.length>0){var t=e.results[0];if(t.type==="Employee"){var r=this.getOwnerComponent().getRouter();r.navTo("RouteView2")}else{var r=this.getOwnerComponent().getRouter();r.navTo("RouteView3")}}else{sap.m.MessageToast.show("Invalid username or password")}}.bind(this),error:function(e){sap.m.MessageToast.show("Error during login")}})}else{sap.m.MessageToast.show("Please enter username and password")}},onPressSingupView:function(){var e=this.getOwnerComponent().getRouter();e.navTo("RouteView4")},onUpload:function(e){var t=e.getParameter("files")&&e.getParameter("files")[0];this._import(t)},_import:function(e){var t=this;if(e&&window.FileReader){var r=new FileReader;r.onload=function(e){var r=e.target.result;var o=XLSX.read(r,{type:"binary"});var n=[];o.SheetNames.forEach(function(e){n=n.concat(XLSX.utils.sheet_to_row_object_array(o.Sheets[e]))});t.sendDataToBackend(n)};r.onerror=function(e){console.error(e)};r.readAsBinaryString(e)}},sendDataToBackend:function(e){var t=this;var r=t.getOwnerComponent().getModel();var o={excledata:e.map(e=>({ID:String(e.ID),userName:String(e.userName),password:String(e.password),type:String(e.type),empDetail:{ID:String(e.ID),firstName:String(e.firstName),lastName:String(e.lastName),DOB:null,email:String(e.email),address:String(e.address),mobile:String(e.mobile),salary:e.salary}}))};r.create("/addUser",o,{method:"POST",success:function(e){console.log("Users added successfully:",e)},error:function(e){console.log("Error adding users:",e)}})},incrementAmount:function(){var e=this.byId("userid").getValue();var t=parseFloat(this.byId("amountIncrement").getValue());var r=this.getOwnerComponent().getModel();r.create("/addSalary",{ID:e,salary:t},{method:"POST",success:function(e){console.log(e)},error:function(e){console.log(e)}})}})});
//# sourceMappingURL=View1.controller.js.map